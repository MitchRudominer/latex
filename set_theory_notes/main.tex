\documentclass[oneside,12pt]{amsart}

\usepackage{amsmath,amssymb,latexsym,eucal,amsthm}

\input{mathdefs}
\input{theoremstyles}

\pagestyle{plain}

\begin{document}

\title{Set Theory Notes}
\author{Mitch Rudominer}

\maketitle

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Ordinal Arithmethic}

By Cantor's Normal Form Theorem (see \cite{Jech_Book2} pg 24) an ordinal
is closed under addition (a.k.a. \emph{indecomposable}) iff it is of the form
$\omega^{\alpha}$ for some $\alpha$. It is closed under multiplication iff
it is of the form $\omega^{\alpha}$ for some $\alpha$ that is closed under
addition.

The canoncial well-ordering of $\text{Ord} \times \text{Ord}$ is given
on page 30 of \cite{Jech_Book2}. Let $\Gamma(\alpha,\beta)$ be the rank
of $(\alpha,\beta)$ under this well-ordering.

Let $\Sigma(\alpha)$ be the sum over $\beta<\alpha$
of $\beta*2+1$. Then it is clear that $\Gamma(\alpha,\alpha) = \Sigma(\alpha)$.
Notice that this is a generalization of the fact that the sum of the first
n odd numbers is $n^2$.

\begin{lemma}
$\Sigma(\alpha) = \alpha$ iff $\alpha$ is closed under multiplication.
\end{lemma}

We do not prove this but below, just for fun, we give a table of values of
$\Sigma(\alpha)$ that indicate that $\Sigma(\omega^{\omega})=\omega^{\omega}$.

\begin{tabular}{|c|c|c|}
\hline $\alpha$ & $\alpha*2+1$ & $\Sigma(\alpha)$ \\ \hline \hline
0 & 1 & 0 \\ \hline
1 & 3 & 1 \\ \hline
2 & 5 & 4 \\ \hline \hline

$\boldsymbol{\omega}$ & $\omega*2+1$ & $\boldsymbol{\omega}$ \\ \hline
$\omega + 1$ & $\omega*2+2$ & $\omega*3 + 1$ \\ \hline
$\omega + 2$ & $\omega*2+3$ & $\omega*5 + 2$ \\ \hline \hline

$\boldsymbol{\omega*2}$ & $\omega*4+1$ & $\boldsymbol{\omega^2}$ \\ \hline
$\omega*2 + 1$ & $\omega*4+2$ & $\omega^2 + \omega*4+1$ \\ \hline \hline

$\omega*3$ & $\omega*6+1$ & $\omega^2 *2$ \\ \hline \hline

$\omega*4$ & $\omega*8+1$ & $\omega^2 *3$ \\ \hline \hline

$\boldsymbol{\omega^2}$ & $\omega^2*2+1$ & $\boldsymbol{\omega^3}$ \\ \hline
$\omega^2 + 1$ & $\omega^2*2+2$ & $\omega^3 + \omega^2*2+1$ \\ \hline \hline

$\omega^2 + \omega$ & $\omega^2*2+\omega + 1$ & $\omega^3 * 2$ \\ \hline
$\omega^2 + \omega + 1$ & $\omega^2*2+ \omega + 2$ & $\omega^3*2 + \omega^2*2+\omega + 1$ \\ \hline \hline

$\omega^2 + \omega*2$ & $\omega^2*2+\omega*2 + 1$ & $\omega^3 * 3$ \\ \hline

$\omega^2 + \omega*2 + 1$ & $\omega^2*2+\omega*2 + 2$ & $\omega^3 * 3 + \omega^2*2+\omega*2 + 1$ \\ \hline \hline

$\omega^2  + \omega * 3$ & $\omega^2*2+ \omega*6 + 1$ & $\omega^3 * 4$ \\ \hline \hline

$\boldsymbol{\omega^2  *2}$ & $\omega^2*4+  1$ & $\boldsymbol{\omega^4}$ \\ \hline \hline
$\omega^2  *3$ & $\omega^2*6+  1$ & $\omega^4*2$ \\ \hline \hline
$\boldsymbol{\omega^3}$ & $\omega^3*2+  1$ & $\boldsymbol{\omega^5}$ \\ \hline \hline
$\omega^3 + \omega^2$ & $\omega^3 *2+ \omega^2 + 1$ & $\omega^5*2$ \\ \hline \hline
$\omega^3 + \omega^2*2$ & $\omega^3*2 + \omega^2*2 + 1$ & $\omega^5*4$ \\ \hline \hline
$\boldsymbol{\omega^3*2}$ & $\omega^3*4+1$ & $\boldsymbol{\omega^6}$ \\ \hline \hline
$\omega^3*3$ & $\omega^3*6+1$ & $\omega^6*2$ \\ \hline \hline
$\boldsymbol{\omega^4}$ & $\omega^4*2+1$ & $\boldsymbol{\omega^7}$ \\ \hline \hline
$\omega^4 + \omega^3$ & $\omega^4*2 + \omega^3 + 1$ & $\omega^7*2$ \\ \hline \hline
$\boldsymbol{\omega^4*2}$ & $\omega^4*4+1$ & $\boldsymbol{\omega^8}$ \\ \hline \hline
$\omega^4*3$ & $\omega^4*6+1$ & $\omega^8*2$ \\ \hline \hline
$\boldsymbol{\omega^5}$ &  $\omega^5$*2+1 & $\boldsymbol{\omega^9}$ \\ \hline \hline
$\omega^{\omega}$ & $\omega^{\omega}*2 + 1$ & $\omega^{\omega}$ \\ \hline \hline

\end{tabular}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Combinatorics of $\omega$}
\begin{definition}
If $A,B \subseteq \omega$ then $A$ is  \emph{almost contained} in $B$ if
$A - B$ is finite.
\end{definition}

\begin{lemma}
The relation of almost containment is transitive and if $A\subset B$ then
$A$ is almost contained in $B$.
\end{lemma}
\begin{proof}
Trivial.
\end{proof}

\begin{lemma}
Let $\alpha < \omega_1$ be a limit ordinal and suppse $\sequence{A_{\gamma}}{\gamma < \alpha}$ is a sequence of infinite
subsets of $\omega$ such that for $\gamma_1 < \gamma_2$, $A_{\gamma_2}$ is almost contained in
$A_{\gamma_1}$. Then there is an infinite $A_{\alpha}$ such that $A_{\alpha}$ is almost contained
in $A_{\gamma}$ for $\gamma<\alpha$.
\end{lemma}
\begin{proof}
Let $\sequence{\gamma_n}{n \in \omega}$ be cofinal in $\alpha$. Let $B_n = \Intersection{i<=n} A_{\gamma_i}$.
Then each $B_n$ is infinite because $A_{\gamma_n}$ is almost contained in $A_{\gamma_j}$ for $i<n$. Also $B_{n+1} \subseteq B_n$.
Pick $p_n \in B_n$ and let $A_{\alpha} = \setof{p_n}{n\in\omega}$. Then $A_{\alpha}$ is almost contained in $A_{\gamma_i}$ for each
$i$ because $p_n \in A_{\gamma_i}$ for $n \geq i$. Let $\gamma < \alpha$. Then there is an $i$ such that $\gamma < \gamma_i$.
Since $A_{\alpha}$ is almsot contained in $A_{\gamma_i}$ and $A_{\gamma_i}$ is almost contained in $A_{\gamma}$, we have that
$A_{\alpha}$ is almost contained in $A_{\gamma}$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Baire Space}

\begin{theorem}
Let $D$ be a countable dense subsbset of the real interval $(0,1)$ and let $W=(0,1) - D$
endowed with the subset topology.
Then $\pre{\omega}{\omega}$ is homeomorphic to $W$.
\end{theorem}
\begin{proof}
For each finite sequence $s\in \pre{\omega}{<\omega}$ we will define an open interval
$I(s) =  \left(a(s), b(s) \right)$ with $I(s)\subseteq (0,1)$ with the following properties:
\begin{itemize}
\item[(a)] The function $I$ is one-to-one.
\item[(b)] $I(\emptyset) = (0,1)$.
\item[(c)] $D = \setof{a(s), b(s)}{\length(s) > 0}$.
\item[(d)] For each $n\in\omega$, $\setof{I(s)}{\length(s) = n}$ is a set of disjoint intervals
each of length less then $1/n$ and the closure of the union of all of those intervals is $[0,1]$.
\item[(e)] If $s \subsetneqq t$ then the closure of $I(t)$ is contained in $I(s)$.
\end{itemize}

First suppose we have such a function $I$ and we will show how to use it to complete the proof.

For $x\in \pre{\omega}{\omega}$ let $F(x) = \lim_{n\to\infty} a(x\restr n)$ if the limit exists.

\begin{claim}
$F(x)$ is defined for all $x\in \pre{\omega}{\omega}$. Furthermore for each $n\in\omega$
$F(x) \in I(x\restr n)$.
\end{claim}
\begin{subproof}
By (e), $a(x\restr m) \in I(x\restr n)$ for all $m>n$ and by (d) $\length{I(x\restr n)} < 1/n$ so
$\sequence{a(x\restr n)}{n\in\omega}$ is cauchy. So $F(x)$ exists and since for all
$m>n+1$, $F(x\restr m) \in I(x\restr n+1)$ and
$\text{closure}(I(x\restr n+1)) \subset I(x\restr n)$, $F(x)\in I(x\restr n)$.
\end{subproof}

\begin{claim}
$F$ is one-to-one.
\end{claim}
\begin{subproof}
Suppose $x\not= y$ and let $n$ be such that $x\restr n \not= y\restr n$. Then
$F(x)\in I(x\restr n)$, $F(y) \in y\restr n$, and $I(x\restr n) \intersect I(y\restr n) = \emptyset$.
So $F(x)\not= F(y)$.
\end{subproof}

\begin{claim}
$\ran{F} \intersect D = \emptyset$.
\end{claim}
\begin{subproof}
Suppose towards a contradiciton that $F(x)\in D$. So then $F(x) = a(s)$ or
$F(x) = b(s)$ for some $s$.
Let $n=\length(s)$. But $x\in I(x\restr n)$ and $I(s)$ is either disjoint
from $I(x\restr n)$ or equal to $I(x\restr n)$ so it is not possible for
$I(x) = a(s)$ or $I(x) = b(s)$.
\end{subproof}

\begin{claim}
$F$ is onto $W$.
\end{claim}
\begin{subproof}
Let $\alpha\in W$. We define an $x\in \pre{\omega}{\omega}$ by defining $x\restr n$
by induction on $n$.
We maintain by induction that $\alpha\in I(x\restr n)$.
It will then follow that $F(x) = \alpha$.
Notice that $\alpha \in I(\emptyset)$.
Suppose $x\restr n$ has been defined and we will define $x(n)$.
By (d) there is a unique $s$ with $\length(s) = n + 1$ such that $\alpha \in s$.
By induction $s\restr n = x\restr n$. So we may define $x\restr (n+1) = s$.
\end{subproof}

\begin{claim}
$F$ is a homeomorphism from $F$ to $W$.
\end{claim}
\begin{subproof}
We already have that $F$ is a bijection. To see that it is a homeomorphism, for
each $s\in\pre{\omega}{<\omega}$ let
$N(s) = \setof{x\in\pre{\omega}{\omega}}{s \subset x}$. Then
$\setof{N(s)}{s\in\pre{\omega}{\omega}}$ is a basis for the topology on
Baire space. $F[N(s)] = W \intersect I(s)$.
$\setof{W\intersect I(s)}{s\in\pre{\omega}{<\omega}}$ is a basis for the
relative topology on $W$ because for any open interval $J\subset (0,1)$ there
is an $s$ such that $I(s) \subset J$.
\end{subproof}

Thus it suffices to define a function $I$ that satisfies (a) - (e).
Enumerate $D = \sequence{q_i}{i\in\omega}$.
We define $I(s)$ by induction on the length of $s$. Let $I(\emptyset)=(0,1)$.
Now suppose $I$ has been defined for all $s$ of length $<= k$ and satisfies
(d) for $n <= k$ and satisfies (e) for $s$ and $t$ of length $<= k$ and $a(s),b(s) \in D$
for all $s$ of  length $<= k$.

Fix $s$ of length $k$. We will define $I(s\adjoin j)$ for $j\in\omega$. $D\intersect I(s)$
is dense in $I(s)$. Let $\Z$ be the set of integers (including negative integers) and let
$f:\Z\injection D\intersect I(s)$ be order preserving and have the properties that
\begin{itemize}
\item[(i)] $\lim_{j\to-\infty} f(j) = a(s)$
\item[(ii)] $\lim_{j\to\infty} f(j) = b(s)$
\item[(iii)] $|f(j+1) - f(j)| < 1/k+1$ for all $j$.
\item[(iv)] If $q_k\in I(s)$ then $q_k \in \range{f}$.
\end{itemize}
Since $D\intersect I(s)$ is dense it is trivial to construct such an $f$.

Next define $I(s\adjoin (2*j)) = \left( f(j), f(j+1) \right)$
and $I(s\adjoin (2*j+1)) = \left( f(-(j+1)), f(-j) \right)$.

It is then clear that we have satisfied (b) and we have maintained (a), (c) and (d)
by induction. So we are done.

\end{proof}

If $D$ is the set of rational numbers then $W$ is the set of irrationals and so Baire space
is homeomorphic to the irrationals.

One specific mapping from Baire space to the irrationals is given by continued fractions.
More precisely if $x = \langle x(0), x(1), x(2), \ldots \rangle$, then $F(x)$
is the continued fraction generated by $\langle x(0) + 1, x(1) + 1, x(2) + 1, \ldots \rangle$.

Let $\N$ be the set of positive integers.
The continued fraction generated by $\langle a_0, a_1, a_2, \ldots \rangle$,
where each $a_i\in\N$, is defined as follows.
$$C(a_0) = \frac{1}{a_0}$$
$$C(a_0, \ldots, a_n) = \frac{1}{a_0 + C(a_1, \ldots, a_n)}$$
$$C(a_0, a_1, \ldots) = \lim_{n\to\infty} C(a_0, a_1, \ldots, a_n)$$

Some facts about continued fractions: Let $s\in\pre{\N}{<\omega}$ and $n\in\N$.
\begin{itemize}
\item If $\length{s}$ is even then
$$ C(s\adjoin \angles{n+1}) \leq C(s\adjoin \angles{n,m}) <  C(s\adjoin \angles{n, m+1}) < C(s\adjoin \angles{n})$$
and $\lim_{m\to\infty} C(s\adjoin \angles{n,m}) = C(s\adjoin \angles{n})$.
\item If $\length{s}$ is odd then
$$ C(s\adjoin \angles{n}) < C(s\adjoin \angles{n, m+1}) < C(s\adjoin \angles{n, m}) \leq C(s\adjoin \angles{n+1})$$
and $\lim_{m\to\infty} C(s\adjoin \angles{n,m}) = C(s\adjoin \angles{n}$.
\end{itemize}

with equality holding where $\leq$ occurs if and only if $m=1$.


It is interesting to analyze this continued fractions mapping in terms of the proof we gave above.
For $s\in\pre{\omega}{<\omega}$ let $s^{+}$ be defined by $s^{+}(i) = s(i) + 1$.

The function $I$ from the proof would be defined as follows:
\begin{itemize}
\item If $\length{s}$ is even and $n\in\omega$ then
$$ I(s\adjoin \angles{n}) = \bigl ( C(s^{+}\adjoin \angles{n+2},  C(s^{+}\adjoin \angles{n+1}) \bigr )$$
\item If $\length{s}$ is odd then
$$ I(s\adjoin \angles{n}) = \bigl ( C(s^{+}\adjoin \angles{n+1}), C(s^+\adjoin \angles{n+2} \bigr )$$
\end{itemize}


The construction using continued fractions differs from the construction we gave in the proof
in that the embedding of subintervals done at each stage does not have order type $\Z$ as in the proof but instead
has order type alternating between $-\omega$ and $\omega$ depending on whether the length of $s$ is even or odd.
Notice that it does not work to use $\omega$ at every stage because then the left
endpoints of each of the intervals, i.e. the $a(s)$, are in the range
of $F$ and then $F$ is not a homeomorphism.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Partial Orders and Boolean Algebras}

\begin{lemma}
Let $\B$ be a boolean algebra and $A\subset\B$. Then $A$ is a maximal antichain iff $A$ is a partition.
\end{lemma}
\begin{proof}
Suppose $A$ is maximal. We need to show that $\Sigma A = 1$. Supose $\Sigma A = a \not= 1$. Let
$b = -a$. Then $b \wedge x = 0$ for all $x\in A$ and this contradicts the maximality of $A$. Now suppose
$\Sigma A = 1$. Suppose there exists a nonzero $b$ such that $b \wedge x = 0$ for all $x\in A$. Let
$a = -b$. Then $x\leq a$ for all $x \in A$ and this contradicts $\Sigma A = 1$.
\end{proof}

\begin{lemma}
Let $\P$ be a partial order.
\begin{itemize}
\item[(a)] If $D$ is dense and $A\subseteq D$ is a maximal antichain
in $D$ then $A$ is a maximal antichain in $\P$.
\item[(b)] If $A$ is a maximal antichain and $D$ is the downward closure
of $A$ then $D$ is dense, open in $\P$.
\end{itemize}
\end{lemma}
\begin{proof}
(a) Suppose $x\notin A$ and $x$ is incompatible with every element of $A$.
Let $p\in D$ with $p\leq x$. Since $A$ is maximal in $D$ let $q\in A$ with
$q$ compatible with $p$. Then $q$ is compatible with $x$. Contradiction.

(b) Clearly $D$ is open. Let $p \in \P$ and let $q\in A$ be compatible with $p$.
Then there is an $r\leq q$ such that $r\leq p$. Since $p$ is arbitrary and $r\in D$,
$D$ is dense.
\end{proof}

\begin{lemma}
Every complete field of sets is an atomic Boolean algebra.
\end{lemma}
\begin{proof}
Let $\B$ be a complete field of sets and let $a\in \B$ with $a\not= \emptyset$.
We must find an atom of $\B$ below $a$.
Let $x\in a$ and let $b = \Pi \setof{c\in \B}{x\in c}$. Then $b\subseteq a$,
$b\in \B$, and $b$ is an atom becuase if $b=c_1\union c_2$ with $c_1$ and $c_2$
non-empty elements of $\B$, then one of $c_1$ and $c_2$ would contain $x$ contradicting the defintion of $b$.
\end{proof}

The sets of the form of $b$ from the previous proof are the equivalence classes of an equivalence relation
on the underlying set of $\B$ (i.e. the element 1). $\B$ is isomorphic to the powerset of the set of
these equivalence classes.

\begin{lemma}
Every complete Boolean algebra $\B$ is 2-distributive.
\end{lemma}
\begin{proof}
Let $A=\setof{a_i}{i\in I}$ and $B=\setof{b_j}{j\in J}$ be subsets of $\B$.
For every $(i,j)\in I \times J$, $a_i \wedge b_j \leq a_i \leq \Sigma A$ and
$a_i \wedge b_j \leq b_j \leq \Sigma B$ so $a_i \wedge b_j \leq \Sigma A \wedge \Sigma B$,
so
$\Sigma \setof{a_i \wedge b_j}{(i,j)\in I \times J} \leq \Sigma A \wedge \Sigma B$.

Now let $u = \Sigma \setof{a_i \wedge b_j}{(i,j)\in I \times J}$ and suppose
towards a contradiction that
$u < \Sigma A \wedge \Sigma B$ and let $ w= \Sigma A \wedge \Sigma B - u$, $w\not=0$.

Note that $\Sigma B - w < \Sigma B$.

We claim that there exists a $j$ such that $b_j \wedge w \not= 0$. For suppose not.
Then for all $j$, $b_j\leq \Sigma B - w < \Sigma B$, contradicting the definition of $\Sigma B$.
Fix such a $j$ and let $v = w \wedge b_j$, $v\not=0$.

Note that $\Sigma A - v < \Sigma A$.

Next we claim that for all $i$, $a_i \wedge v = 0$. This is because
$a_i \wedge v \leq a_i \wedge b_j \leq u$, and $u \wedge v = 0$.

Now it follows that for all $i$, $a_i \leq \Sigma A - v < \Sigma A$,
contradicting the definition of $\Sigma A$.
\end{proof}

\begin{lemma}
Every atomic Boolean algebra (and hence every complete field of sets) is
$\kappa$-distributive for all $\kappa$.
\end{lemma}
\begin{proof}
Let $\B$ be an atomic Boolean algebra. By Lemma 7.16 of \cite{Jech_Book2} it suffices to
see that the intersection of $\kappa$ dense open sets of $\B$ is dense. But a set is dense
in $\B$ if and
only if it contains all atoms of $\B$ so this is trivial.
\end{proof}

\begin{lemma}[Exercise 7.24 from \cite{Jech_Book2}] Let $A$ be a subalgebra of a Boolean algebra $B$
and let $u\in B - A$. Then there exists ultrafilters $F$, $G$ on $B$ such that $u\in F$, $u\notin G$,
and $F\intersect A = G\intersect A$.
\end{lemma}
\begin{proof}
For $x\in B$ let $A_x=\setof{a\in A}{a \geq x}$. Then $A_x$ is a filter on $A$.
Let $H = A_u \union A_{-u}$.

We claim that $H$ has the finite intersection property.
It suffices to see that $a\wedge b\not= 0$ whenever $a\in A_u$ and $b\in A_{-u}$.
This is true because $a > u$ (since $u\not\in A$) so $a\wedge -u \not = 0$.

Let $K$ be an ultrafilter on $A$ that extends $H$. We claim that $K\union\singleton{u}$
and $K\union\singleton{-u}$ both have the finite intersection property. To see this
it suffices to see that $a\wedge u \not=0$ and $a\wedge -u \not=0$ for $a\in K$. Suppose
for example that $a\wedge u = 0$. Then $-a \geq u$ so $-a \in A_u$ so $-a \in H$ so $-a \in K$
which is impossible because $a\in K$ and $K$ is an ultrafilter.

Let $F$ be an ultrafilter on $B$ that extends $K\union\singleton{u}$ and let $G$ be an ultrafilter
on $B$ that extends  $K\union\singleton{-u}$. Then $F\intersect A = G\intersect A = K$ so these $F$ and $G$ work.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Stationary Sets}

\begin{definition}
If $X$ is a set of ordinals let $\limit(X)$ be the set of limit points of $X$.
\end{definition}

Note that if $X$ is a club set then $\limit(X)$ is also a club set.

\begin{definition}
If $X\subseteq \kappa$, $\kappa > \omega$ regular, then
$$\trace(X) = \setof{\alpha<\kappa}{\cof(\alpha) > \omega \AND X\intersect\alpha \text{ is stationary}}$$
if that set is stationary. Otherwise $\trace(X)$ is undefined.
\end{definition}


\begin{lemma}[pg 99 of \cite{Jech_Book2}]
\label{SimilarTraceLemma}
If $A\simeq \Aprime$ mod $I_{\text{NS}}$ then
$\trace(A) \simeq \trace(\Aprime)$ mod $I_{\text{NS}}$.
\end{lemma}
\begin{proof}
Notice that $S\simeq T$ iff there is a club set $C$ s.t. $S\intersect C = T\intersect C$.

Fix a club $C$ s.t. $A\intersect C = \Aprime\intersect C$.
We claim that $\trace(A) \intersect \limit(C) = \trace(\Aprime) \intersect \limit(C)$.

For one direction, let $\alpha\in\trace(A)\intersect \limit(C)$. Let $E$ be club in $\alpha$.
We must show that $E\intersect \Aprime \not= \emptyset$. Since $E\intersect C$
is club in $\alpha$ and $A\intersect\alpha$ is stationary,
there is a $\beta\in  E \intersect A\intersect C =  E \intersect \Aprime\intersect C$.

The other direction is similar.

\end{proof}

\begin{lemma}[Lemma 8.19 of \cite{Jech_Book2}]
\mbox{}
\begin{enumerate}
\item[(i)] $A<\trace(A)$.
\item[(ii)] If $A<B$ and $B<C$ then $A<C$.
\item[(iii)] If $A<B$ and $A\simeq \Aprime$ and $B\simeq \Bprime$ then
$\Aprime<\Bprime$.
\end{enumerate}
\end{lemma}
\begin{proof}
(i) Notice that $S<T$ iff $\alpha\in\trace(S)$ for a.e. $\alpha \in T$. Then clearly for a.e.
$\alpha\in\trace(A)$, $\alpha\in\trace(A)$.

(ii) Notice that $S<T$ iff there is a club set $D$ such that $\alpha\in\trace(S)$ for all
$\alpha$ in $T\intersect D$.

Let $D_1$ witness $A<B$ and $D_2$ witness $B < C$.
Let $D_3=\limit(D_1) \intersect D_2$.
We claim that $D_3$ witnesses that $A<C$. Let $\alpha\in D_3 \intersect C$. We know
that $B\intersect \alpha$ is stationary. We claim that
$A\intersect \alpha$ is stationary. Let $E$ be club in $\alpha$. We must find
$\beta\in E\intersect A$.

Since $D_1 \intersect\limit(E)$ is club in $\alpha$, let
$\gamma\in D_1 \intersect \limit(E) \intersect B$.
Then $\gamma\in\trace(A)$ and $E\intersect\gamma$ is club in $\gamma$. So there
is a $\beta<\gamma$ with $\beta\in A\intersect E$.

(iii) Let $C$ be club such that $A\intersect C=\Aprime\intersect C$ and
$B\intersect C = \Bprime\intersect C$ and for all $\alpha\in B\intersect C$,
$\alpha\in\trace(A)$. By lemma \ref{SimilarTraceLemma}, there is a club $D$ such that
$\trace(A)\intersect D = \trace(\Aprime) \intersect D$. So for all
$\alpha \in C \intersect D \intersect \Bprime$, $\alpha\in\trace(\Aprime)$.

\end{proof}

\begin{lemma}[Exercise 8.5 of \cite{Jech_Book2}]
Let $S\subseteq \omega_1$ be stationary. Then for every $\alpha <\omega_1$ there is a closed
set $A\subseteq S$ with order-type $\alpha$.
\end{lemma}
\begin{proof}
Let $C_{\alpha}$ for $\alpha<\omega_1$ be defined by induction as follows:
\begin{align*}
C_0 &=  \limit(S) \\
C_{\alpha+1} &=  \limit \left ( S \intersect C_\alpha\right ) \\
C_{\lambda} &=  \limit \left ( S \intersect \Intersection{\alpha<\lambda} C_\alpha \right )
\end{align*}
By induction on $\alpha$ each $C_{\alpha}$ is club.

We claim that if $\lambda \in C_{\alpha}$ then $\lambda$ is the supremum of a closed subset
of $S$ of order type $\omega^{(1 + \alpha)}$. We prove this by induction on $\alpha$.
It is clearly true for $\alpha = 0$.

Fix $\alpha>0$
and suppose the claim is true for $\beta<\alpha$. Let $\lambda \in C_{\alpha}$.


If $\alpha$ is a limit ordinal let $\sequence{\alpha_n}{n\in\omega}$
be an increasing sequence with supremem $\alpha$, otherwise let $\alpha_n = \alpha-1$.
Let
$\sequence{\lambda_n}{n\in\omega}$ be an increasing sequences with supremem $\lambda$
such that $\lambda_n \in S\intersect C_{\alpha_n}$. There are such sequences by the defintion of
$C_{\alpha}$.

By induction each $\lambda_n$ is the supremum of a closed set $A_n \subset S$ with the order-type
of $A_n  = \omega^{(1 + \alpha_n)}$. Since  $\omega^{(1 + \alpha_n)}$ is closed under addition
we may discard an initial segment of $A_n$ and still maintain the fact that the order type of
$A_n$ is $\omega^{(1 + \alpha_n)}$. Thus we may assume that the minimum element of $A_{n+1}$ is
greater than $\lambda_n$.

Let $A= \Union{n} A_n$.
Then $A$ is a closed subset of $S$ and $\sup(A) = \lambda$ and the order type of $A$ is
$\omega^{(1+\alpha)}$.
\end{proof}

\begin{lemma}[Exercises 8.13 of \cite{Jech_Book2}]
\label{Exercise8.13}
Let $\kappa$ be a regular, uncountable cardinal.
If $\lambda<\kappa$ is the $\alpha$th regular cardinal, then $o(E^{\kappa}_{\lambda}) = \alpha$.
\end{lemma}
\begin{proof}
If $\lambda < \mu$ then $E^{\kappa}_{\lambda} < E^{\kappa}_{\mu}$ so $o(E^{\kappa}_{\lambda}) \geq \alpha$.
We need to show that $o(E^{\kappa}_{\lambda}) \leq \alpha$.

Let us write $A \subseteq^{*} B$ to mean that $A$ and $B$ are stationary and almost every element of $A$ is an element of $B$.

\begin{claim}[Claim 1]
If $A<B$ and $B \subseteq^{*} E^{\kappa}_{\lambda}$, then there is a $\mu<\lambda$ such that $A\intersect E^{\kappa}_{\mu}$ is stationary.
\end{claim}
\begin{subproof}
It suffices to show that $A\intersect \Union{\mu<\lambda}E^{\kappa}_{\mu}$ is stationary.

Let $E\subseteq \kappa$ be club. We will show that $E\intersect A \intersect \Union{\mu<\lambda}E^{\kappa}_{\mu} \not= \emptyset$.

Let $D$ be club such that $B\intersect D \subseteq \trace(A)$ and $B\intersect D \subseteq E^{\kappa}_{\lambda}$.
Let $\xi\in \limit(E) \intersect D \intersect B$. So then $A\intersect \xi$ is stationary and $\cof(\xi) = \lambda$ and
$E\intersect\xi$ is club. There is a club $F\subset \xi$ consisting of ordinals of cofinality less than $\lambda$.
Let $\eta\in F\intersect E \intersect A$. Then $\eta$ witnesses that
 $E\intersect A \intersect \Union{\mu<\lambda}E^{\kappa}_{\mu} \not= \emptyset$.
\end{subproof}

\begin{claim}[Claim 2]
If $A\subseteq^{*} B$ then $o(B)\leq o(A)$.
\end{claim}
\begin{subproof}
This is obvious because if $C < B$ then $C < A$.
\end{subproof}

\begin{claim}[Claim 3]
If $B\subseteq^{*}E^{\kappa}_{\lambda}$ then $o(B)\leq\alpha$ where $\lambda$ is the $\alpha$th regular cardinal.
\end{claim}
\begin{subproof}
By induction on $\lambda$. The claim is true if $\lambda=\omega$ so assume $\lambda $ is uncountable.
Let $A<B$. It suffices to show that $o(A)<\alpha$. By Claim 1 there is a
$\mu<\lambda$ such that $C = A\intersect E^{\kappa}_{\mu}$ is stationary. By induction $o(C) < \alpha$ and by
Claim 2 $o(A)\leq o(C)$.
\end{subproof}

\end{proof}

\begin{corollary}
\label{CorollaryToExercise8.13}
In the situation of Lemma \ref{Exercise8.13}, if $A\intersect E^{\kappa}_{\lambda}$ is stationary
then $o(A)\leq\alpha$.
\end{corollary}
\begin{proof}
Let $C=A\intersect E^{\kappa}_{\lambda}$. By Claim 3 from Lemma \ref{Exercise8.13} $o(C)\leq\alpha$ and
by Claim 2 $o(A)\leq o(C)$.
\end{proof}

\begin{lemma}
\label{NonMahloLemma}
Let $\kappa>\omega$ be regular and let $S\subseteq\kappa$ be a stationary set consisting of singular ordinals.
Then there is a $\lambda<\kappa$ such that $S\intersect E^{\kappa}_{\lambda}$ is stationary.
\end{lemma}
\begin{proof}
Let $f(\alpha)=\cof(\alpha)$. Then $f$ is pressing down on $S$ so $f$ is constant on a stationary subset of $S$.
\end{proof}

\begin{lemma}[Exercises 8.14 of \cite{Jech_Book2}]
$o(\kappa)\geq\kappa$ iff $\kappa$ is weakly inaccessible; $o(\kappa)\geq\kappa+1$ iff $\kappa$ is weakly Mahlo.
\end{lemma}
\begin{proof}
First suppse $\kappa$ is weakly inaccessible. Then there are $\kappa$ regular cardinals below $\kappa$
so by Lemma \ref{Exercise8.13} $o(\kappa)\geq\kappa$.

Next suppose that $\kappa$ is weakly Mahlo and let $A$ be the set of regualr cardinals less than $\kappa$.
Then $E^{\kappa}_{\lambda}<A$ for all regular $\lambda<\kappa$ so $o(A)\geq\kappa$ so $o(\kappa)>\kappa$.

Now suppose $\kappa$ is not weakly inaccessible and we will show that  $o(\kappa)<\kappa$.
This is obviously true if $\kappa=\omega$ so suppose $\kappa$ is uncountable.
Let $A\subseteq\kappa$. There are fewer than $\kappa$ regular cardinals below $\kappa$
so by Lemma \ref{Exercise8.13} it suffices to see that there is a $\lambda<\kappa$ such that
$o(A)<=o(E^{\kappa}_{\lambda})$.
Notice that $\setof{E^{\kappa}_{\lambda}}{\lambda < \kappa, \lambda \text{ regular}}$ is a partition of the limit ordinals
below $\kappa$
into fewer than $\kappa$ stationary sets so there is a $\lambda<\kappa$ so that $A\intersect E^{\kappa}_{\lambda}$
is stationary. By Corollary \ref{CorollaryToExercise8.13} $o(A)\leq\alpha=o(E^{\kappa}_{\lambda})$.

Finally suppose that $\kappa$ is weakly inaccessible but not weakly Mahlo and we will show that $o(\kappa)=\kappa$.
Let $A\subseteq\kappa$ be stationary. It suffices to see that there is a $\lambda<\kappa$ such that $A\intersect E^{\kappa}_{\lambda}$
is stationary. (Note that this is equivalent to showing that $\setof{E^{\kappa}_{\lambda}}{\lambda < \kappa, \lambda \text{ regular}}$
is a maximal antichain in $\P(\kappa) / I_{\text{NS}}$). This follows from Lemma \ref{NonMahloLemma} since almost every element
of $A$ is singular since $\kappa$ is not Mahlo.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{$\Pkl$}

\begin{definition}
A filter $\cF$ on $\Pkl$ is \emph{fine} iff for every $a\in\Pkl$,
$\hat{a}=\setof{b\in\Pkl}{a\subseteq b}\in\cF$.

$\cF$ is \emph{normal} iff it is closed under diagonal intersections.

$\cF$ has the \emph{pressing down property} iff whenever $f$ is a function
with $\dom(f)$ an $\cF$-positive set and for all $a\in\dom(f)$, $f(a)\in a$, then $f$ is constant on an
$\cF$-positive set.
\end{definition}

\begin{lemma}
$\cF$ is normal iff it has the pressing down property.
\end{lemma}
\begin{proof}
First suppose $\cF$ is normal. Suppose that $f$ is a function with $\dom(f)$ some $\cF$-positive set and $\ran(f)\subset\lambda$,
and suppose $f$ is not constant on an
$\cF$-positive set. For each $\alpha<\lambda$ let $C_{\alpha}=\setof{a\in\Pkl}{f(a)\not=\alpha}$. Then each $C_{\alpha}\in\cF$.
Let $C$ be the diagonal intersection of the $C_{\alpha}$. So for $a\in C$, $f(a)\not=\alpha$ for all $\alpha\in a$.
  Then $C\in\cF$ and $f$ does not press down on $C$.
So then $f$ does not press down on an $\cF$-positive set.

Conversely suppose that $\cF$ has the pressing down property. Let $C_{\alpha}\in\cF$ for $\alpha<\lambda$. Let $C$ be the diagonal
intersection of the $C_{\alpha}$ and suppose that $C\notin\cF$ so that the complement of $C$ is $\cF$-positive. Let $f$ be the
function on the complement of $C$ defined by $f(a) = $ the least $\alpha\in a$ such that $a\notin C_{\alpha}$. Then there is an $\alpha<\lambda$
and an $\cF$-positive set $S$, such that $f(a)=\alpha$ for all $a\in S$.
So for all $a\in S$, $a\notin C_{\alpha}$. But this is impossible because $S$ is $\cF$-positive and
$C_{\alpha}\in\cF$.
\end{proof}

\begin{lemma}
Let $\cF$ be a fine, normal filter on $\Pkl$. Then $\cF$ is $\kappa$-complete.
\end{lemma}
\begin{proof}
Let $\mu<\kappa$ and let $A_{\alpha}\in\cF$ for $\alpha<\mu$. We must show that
$\Intersection{\alpha<\mu}A_{\alpha}\in\cF$. For $\mu\leq\alpha<\lambda$ let
$A_{\alpha}=\Pkl$. Let $A$ be the diagonal intersection of the $A_{\alpha}$
for $\alpha<\lambda$. Then $A\in\cF$. Since $\cF$ is fine $\setof{a\in A}{\mu\subseteq a}\in\cF$.
But if $a\in A$ and $\mu\subseteq a$ then $a\in\Intersection{\alpha<\mu}A_{\alpha}$. So
$\Intersection{\alpha<\mu}A_{\alpha}\in\cF$.
\end{proof}

\begin{lemma}[Exercise 8.16 of \cite{Jech_Book2}]
\label{Exercise8.16}
Let $\cF$ be a fine normal filter on $\Pkl$ and let $g$ be a function on an $\cF$-positive set
such that $g(x)\in[x]^{<\omega}$ for all $x$. Then $g$ is constant on an $\cF$-positive set.
\end{lemma}
\begin{proof}
Fix $n\in\omega$ so that $S = \setof{x}{|g(x)|=n}$ is $\cF$-positive. If $n=0$ we are done so suppose $n>0$.
For $i<n$ let $g_i$ be the function defined on $S$ by
$g_i(x) = $ the $i$-th element of $g(x)$.
For $i<n$ define $S_i$ by induction on $i$ so that $S_i$ is $\cF$-positive, $g_i$ is constant on $S_i$,
and $S\supseteq S_0\supseteq S_1 \supseteq \dots \supseteq S_{n-1}$. Then $g$ is constant on $S_{n-1}$.
\end{proof}

\begin{lemma}[Exercise 8.17 of \cite{Jech_Book2}]
The club filter on $\Pkl$ is a fine normal filter contained in every fine normal filter.
\end{lemma}
\begin{proof}
That the club filter is normal is Lemma 8.23 of \cite{Jech_Book2}.
If $a\in\Pkl$ it is easy to see that $\hat{a}$ is club, so the club filter is fine.

Let $\cF$ be a fine normal filter on $\Pkl$ and let $C\subseteq\Pkl$ be club.
We will show that $C\in\cF$. By Lemma 8.26 from \cite{Jech_Book2}, there is a function
$f:[\lambda]^{<\omega}\map\Pkl$ such that $C_f\subseteq C$. It suffices to see that
$C_f\in\cF$. Suppose not and let $S$ be the compliment of $C_f$ so that $S$ is $\cF$-positive.
Let $g$ be a function with domain $S$ such that for all $x\in S$, $g(x)$ witnesses that
$x\notin C_f$, meaning that $g(x)\in [x]^{<\omega}$ and $f(g(x))\not\subseteq x$.
By Lemma \ref{Exercise8.16}, there is a fixed $a$ and an $\cF$-positive set $T\subseteq S$
such that for all $x\in T$, $g(x)=a$. So $f(a)\not\subseteq x$, for all $x\in T$. But this
contradicts the fact that $\hat{f(a)}\in\cF$ by fineness.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Elementary Embeddings}

Throughout this section let $j:M \map N$ be an elementary embedding with $\crit(j)=\kappa$, where $M$ and $N$ are
transitive models of a sufficient amount of $\ZFC$.

\begin{lemma}
\label{inductiveLemma}
If $j(A) = A$ and $j\restr A = id$ then $j\restr \Powerset(A) = id$.
\end{lemma}
\begin{proof}
Let $S\subseteq A$. Then $j(S) \subseteq j(A) = A$ and for all $x\in A$,
$x \in S$ iff $j(x) \in j(S)$ iff $x\in j(S)$. So $S = j(S)$.
\end{proof}


\begin{corollary}
\label{subsetLemma}
$j(A) = A$ whenever $A\subseteq \nu < \kappa$.
\end{corollary}
\begin{proof}
This follows from Lemma \ref{inductiveLemma} since $j(\nu) = \nu$ and
$j \restr \nu = id$.
\end{proof}

\begin{lemma}
\label{crossProductLemma}
$j(A) = A$ whenever $A\subseteq \nu \times \nu $ and $\nu < \kappa$.
\end{lemma}
\begin{proof}
This follows from Lemma \ref{inductiveLemma} since $j(\nu \times \nu) = \nu \times \nu$ and
$j \restr \nu \times \nu = id$.
\end{proof}

\begin{lemma}
$j\restr H^{M}_{\kappa} = id$ and $H^{M}_{\kappa}\subseteq H^{N}_{\kappa}$.
\end{lemma}
\begin{proof}
Let $f:\nu\bijection A$, $f\in M$, $A$ transitive, $\nu<\kappa$. Let
$B=\setof{\angles{\alpha, \beta}}{f(\alpha) \in f(\beta)}$. Then $j(B) = B$
and $j(f):\nu\bijection j(A)$ so $j(A)$ is a transitive set isomorphic to $A$
so $j(A)=A$.
\end{proof}

\begin{lemma}
\label{lemma0}
$\Powerset^{M}(\kappa) \subseteq N$.
\end{lemma}
\begin{proof}
$A=j(A)\intersect\kappa$.
\end{proof}

\begin{lemma}
\label{lemma1}
Suppose $j(A) = A$ and $j\restr A = id$ and $f\in M$ is a function with $\dom(f) = A$. Then $j(f) = j \circ f$.
\end{lemma}
\begin{proof}
$\dom(j(f)) = A$ and for  $x \in A$, if $y = f(x)$ then $j(y) = j(f)(x)$.
\end{proof}

\begin{lemma}
\label{lemma2}
Suppose $\nu<\kappa$ and $f\in M$, $f:\nu \map A$ where $A\in M$ is such that $f\restr A = id$.
Then $j(f) = f$.
\end{lemma}
\begin{proof}
Follows from \ref{lemma1}.
\end{proof}

\begin{lemma}
$M\models$ ``$\kappa$ is a regular cardinal.''
\end{lemma}
\begin{proof}
Suppose $f:\nu\cofmap\kappa$, $\nu < \kappa$, $f\in M$. Then $j(f) : \nu \cofmap j(\kappa)$.
But by \ref{lemma2} $j(f) = f$ is not cofinal in $j(\kappa) > \kappa$.
\end{proof}

\begin{lemma}
\label{equivalence1}
The following are equivalent:
\begin{itemize}
\item[(a)] $M\models$ ``$\kappa$ is an inaccessible cardinal.''

\item[(b)] $j\restr V^{M}_{\kappa} = id$.

\item[(c)] $V^{M}_{\kappa} = V^{N}_{\kappa}$.

\item[(d)] $\Powerset^{M}(\alpha) = \Powerset^{N}(\alpha)$ for all $\alpha < \kappa$.
\end{itemize}
\end{lemma}
\begin{proof}
(a) $\Implies$ (b). By induction on $\alpha < \kappa$ we show that $j\restr V^{M}_{\alpha} = id$.
The limit step is trivial so suppose $j\restr V^{M}_{\alpha} = id$ and we will show
$j\restr V^{M}_{\alpha + 1} = id$. Let $A\subseteq V^{M}_{\alpha}$ with $A\in M$.
Since $\kappa$ is inaccessible in $M$ let $f:\nu\bijection A$, with $\nu < \kappa$ and
$f\in M$. By lemma \ref{lemma2} and induction, $j(f) = f$ so $j(A) = A$.

(b) $\Implies$ (a). Suppose $A\in V^{M}_{\kappa}$ and $f\in M$, $f:A \cofmap \kappa$. Then
by (b) and lemma \ref{lemma2}, $j(f) = f$. But this contradicts the fact that $j(f)$
is cofinal in $j(\kappa) > \kappa$.

(b) $\Implies$ (c). For $\alpha < \kappa$,  $V^{N}_{\alpha} = j(V^{M}_{\alpha}) = V^{M}_{\alpha}$.

(c) $\Implies$ (b). By induction on $\alpha < \kappa$ we show that $j\restr V^{M}_{\alpha} = id$.
The limit step is trivial so suppose $j\restr V^{M}_{\alpha} = id$ and we will show
$j\restr V^{M}_{\alpha + 1} = id$. Let $A\subseteq V^{M}_{\alpha}$ with $A\in M$.
Let $x \in V^{M}_{\alpha} = V^{N}_{\alpha}$. Then $x\in A$ iff $x = j(x) \in j(A)$.

(c) $\Implies$ (d). Immediate.

(d) $\Implies$ (a). Assume (d) and suppose $2^\alpha >= \kappa$ in $M$ for some
$\alpha < \kappa$ and let $f:\Powerset^{M}(\alpha) \surjection \kappa$. By (d)
$j(\Powerset^{M}(\alpha)) = (\Powerset^{M}(\alpha)$ and by Lemma \ref{subsetLemma},
$j\restr \Powerset^{M}(\alpha) = id$  so $j(f) = j \circ f$
by Lemma \ref{lemma1}. But this is a contradiciton because $j(f)$ is onto $j(k)$
whereas $\kappa \not\in\ran(j)$.
\end{proof}

The conditions (a) - (d) in the previous lemma all follow in particular from the
hypotheses $\Powerset^{M}(\kappa) = \Powerset^{N}(\kappa)$.

\begin{lemma}
\label{equivalence2}
The following are equivalent, and in case they are true
$\kappa$ is a weakly compact cardinal with stationarily many weakly
compact cardinals below it in both $M$ and $N$.
\begin{itemize}
\item[(a)]  $\Powerset^{M}(\kappa) = \Powerset^{N}(\kappa)$.

\item[(b)] $V^{M}_{\kappa + 1} = V^{N}_{\kappa + 1}$.
\end{itemize}
\end{lemma}
\begin{proof}
(a) $\Implies$ (b). Assuming (a) $\kappa$ is inaccessible in $M$
and $V^{M}_{\kappa} = V^{N}_{\kappa}$, by the previous lemma. It follows
that $\kappa$ is a strong limit cardinal in $N$ and using (a) again it follwos
that $\kappa$ is regualr in $N$. So $\kappa$ is inacessible in $M$ and $N$ and
so (b) follows from the fact that $|V_{\kappa}| = \kappa$ in $M$ and $N$.

Now let $T\in M$ be a tree on $\kappa$ of height $\kappa$. Then $j(T) \in N$ is
a tree on $j(\kappa)$ of height $j(\kappa)$ so $j(T)\intersect V^{N}_{\kappa}$
has a cofinal branch. But $j(T)\intersect V^{N}_{\kappa} = T$ so $T$ has a cofinal
branch  $b\in N$ and by (a) $b\in M$. Thus $\kappa$ has the tree property in
$M$ and so it is weakly compact. But then $\kappa$ is also weakly compact in
$N$. Now let $C\subseteq\kappa$ be club with $C\in M$. Then $\kappa\in j(C)$
so $N\models$ ``there is a weakly compact cardinal in $j(C)$" so
$M\models$ ``there is a weakly compact cardinal in $C$". So there are stationarily
many weakly compact cardinals below $\kappa$ in $M$ and so also in $N$.

(b) $\Implies$ (a). Trivial.
\end{proof}

\begin{example}
It is possible for $\kappa$ to be inaccessible in $M$ and $N$ but
$\Powerset^{M}(\kappa) \not= \Powerset^{N}(\kappa)$. For example suppose
$0^{\#}$ exists and let $\kappa < \kappa_2 < \kappa_3$ be indiscernibles,
with $\kappa$ a limit indisernible.
Working in $L$, let $X$ be the hull in
$L_{\kappa_3}$ of $\kappa \union \singleton{\kappa_2}$.
Notice that $\kappa \notin X$ and $|X| = \kappa$. Let $j : M \bijection X$
be the inverse of the transitive collapse. Then
$j:M \prec L_{\kappa_3}$ is an elementary embedding with critical point
$\kappa$, $\kappa$ is inaccessible
in $M$ and in $L_{\kappa_3}$ but $M$ does not have every subset of $\kappa$.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Ultrapowers}

\begin{definition}
Let $M$ be a transitive model of a sufficient amount of $\ZFC$ and let $\kappa$ be
a cardinal of $M$. An $M$-ultrafilter $U$ is \em{weakly amenable} to $M$ iff whenever
$\sequence{X_{\alpha}}{\alpha<\kappa} \in M$ wtih each $X_{\alpha} \subseteq \kappa$,
then $\setof{\alpha < \kappa}{X_{\alpha} \in U} \in M$.
\end{definition}

Of course if $U\in M$ then $U$ is weakly amenable to $M$.

\begin{lemma}
Let $j:M \map N$ be an elementary embedding with $\crit(j)=\kappa$, where $M$ and $N$ are transitive models of a sufficient amount of $\ZFC$.
Let $U = \setof{X \subseteq \kappa}{\kappa \in j(X)}$. If
$\Powerset^{M}(\kappa) = \Powerset^{N}(\kappa)$ then $U$ is weakly amenable to $M$.
\end{lemma}
\begin{proof}
$$\setof{\alpha < \kappa}{X_{\alpha} \in U} =
\setof{\alpha < \kappa}{\kappa\in j(X_{\alpha})} =
S \intersect \kappa $$
where S = $\setof{\alpha < j(\kappa)}{\kappa\in Y_{\alpha}}$
where $\sequence{Y_{\alpha}}{\alpha<j(\kappa)} = j(\sequence{X{\alpha}}{\alpha<\kappa})$.
Since $S\in N$, $S \intersect \kappa \in M$.
\end{proof}

\begin{lemma}
\label{SameNextLevel}
Let $M$ be a transitive model of a sufficient amount of $\ZFC$, let $\kappa$ be
a cardinal of $M$, and let $U$ be a normal
 $M$-ultrafilter over $\kappa$. Suppose
$N = \Ult(M, U)$ is wellfounded. Then the following are equivalent:
\begin{itemize}
\item[(a)] $\Powerset^{M}(\kappa) = \Powerset^{N}(\kappa)$

\item[(b)] $U$ is weakly amenable to $M$.
\end{itemize}
\end{lemma}
\begin{proof}
(a) $\Implies$ (b) follows from the previous lemmma.

(b) $\Implies$ (a). Let $A\in\Powerset^{N}(\kappa)$  and let $f\in M$ represent
$A$, with $f(\beta) \subseteq \beta$ for all $\beta < \kappa$. For each $\alpha<\kappa$
let $X_{\alpha} = \setof{\beta < \kappa}{\alpha \in f(\beta)}$. Then
$A = \setof{\alpha<\kappa}{X_{\alpha} \in U}$. So $A\in M$ by weak amenability.
\end{proof}

From lema \ref{equivalence2} in case (a) or (b) holds we have
$V^{M}_{\kappa+1} = V^{N}_{\kappa+1}$ and $\kappa$ is inaccessible
in $M$ and $N$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Iterated Ultrapowers}

\begin{lemma}
Suppose $\sequence{M_{\alpha}, \kappa_{\alpha}, U_{\alpha}, i_{(\alpha, \beta)}}{\alpha<\beta}$
is an iterated ultrapower with non-decreasing critical points $\kappa_{\alpha}$ and weakly amenable
ultrafilters $U_{\alpha}$. Then $\kappa_{\alpha}$ is an inaccessible cardinal in
$M_{\beta}$ and $V^{M_{\alpha}}_{\kappa_{\alpha} + 1} = V^{M_{\beta}}_{\kappa_{\alpha} + 1}$
for $\beta>=\alpha$.
\end{lemma}
\begin{proof}
By induction. The successor step follows from lemma \ref{SameNextLevel}. The limit step is trivial.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Mitchell Models}

\begin{note}
Lemma 2.10 of \cite{BeginningInnerModelTheory} and Theorem 19.37 of \cite{Jech_Book2}
are incorrect as written.
\end{note}
\begin{proof}
On page 1469 of \cite{BeginningInnerModelTheory} we see the following defintion:

\begin{quote}
Call a sequence $\cU$ \emph{weakly coherent} if it satisfies conditions 1 and 2 of Definition 2.6, together with the following weakened coherence condition: if $(\kappa,\beta) \in \dom(\cU)$ and
$U = \cU(\kappa, \beta)$ then $o^{V}(U)=\beta$.
\end{quote}

Then Lemma 2.10 claims:

\begin{quote}
Suppse $\cU$ and $\cW$ are weakly coherent sequences of measures in $V$ with the same
domain. Then $L[\cU] = L[\cW]$ and $\cU(\kappa, \beta) \intersect L[\cU] =
\cW(\kappa, \beta) \intersect L[\cW]$ for every $(\kappa, \beta)$ in their common
domain.
\end{quote}

Here is a simple example to see that this is not true. Suppose $o(\kappa) = 2$
and there exists two different normal measures on $\kappa$ of order 1:
$U_{1} \not= W_{1}$. Let $A\subseteq \kappa$ be in $U_{1}$ but not $U_{2}$ and consist
of only measurable cardinals.
Let the domains of $\cU$ and $\cW$ be $\setof{(\alpha,0)}{\alpha\in A} \union
\singleton{(\kappa,0), (\kappa, 1)}$.
For $\alpha\in A$ let $\cU(\alpha,0) = \cW(\alpha, 0)$ = any normal measure on
$\alpha$ of order 0. Let $\cU(\kappa,0) = \cW(\kappa, 0)$  = any normal measure
on $\kappa$ of order 0. Let $\cU(\kappa,1) = U_{1}$,
$\cW(\kappa,1) = W_{1}$. Then $\cU$ and $\cW$ are weakly coherent according to
the definition given above. Suppose $L[\cU] = L[\cW]$. The since $A\in L[\cU]$
and $A\in U_1$ and $A \notin W_1$, it is clear that
$U_1 \intersect L[\cU] \not= W_1 \intersect L[\cW]$.

The same example contradicts Theorem 19.37 of \cite{Jech_Book2}.
\end{proof}

To correct the problem described above we must modify the definition of \emph{weakly coherent}.
To use the language from \cite{Jech_Book2} and from \cite{Mitchell-Revisited},
if $(\kappa,\beta) \in \dom(\cU)$  and $U = \cU(\kappa, \beta)$ we want not that
$o^{V}(U)=\beta$ but rather that $o^{\cU}(U)=\beta$.

In \cite{Mitchell-Revisited} Mitchell gives the following definition of \emph{weakly coherent}:
If $(\kappa,\beta) \in \dom(\cU)$  and $U = \cU(\kappa, \beta)$ then
then  $[\alpha \mapsto o^{\cU}(\alpha)]_{U} = \beta$. This is equivalent to the condition
$o^{\cU}(U)=\beta$. In \cite{Mitchell-Revisited} Mitchell then goes on to prove Theorem 5 which states
the same thing as Lemma 2.10 from \cite{BeginningInnerModelTheory} that was quoted above.
With the correct definition of weakly coherent the proof of Theorem 5 from
\cite{Mitchell-Revisited} works.

It seems that in \cite{BeginningInnerModelTheory} Mitchell thought he could
simplify the definition of \emph{weakly coherent}, but the simpler definition does not work.

It is interesting to consider why the proof of Theorem 5 from \cite{Mitchell-Revisited} fails using
the incorrect definition of weakly coherent from \cite{BeginningInnerModelTheory}. The answer I think
is that with the incorrect definition of weakly coherent the comparison iteration from the proof
of Theorem 5 does not necessarily use strictly increasing critical points. For example if you consider
the comparison of the $L[\cU]$ and $L[\cW]$ from the counter example given above, the critical point
$\kappa$ will end up being used more than once. This invalidates the argument that attempts to show
that the measures on $\kappa$ used on the two sides of the comparison must be equal. What is curious
is that in the proof sketch of Lemma 2.10 from \cite{BeginningInnerModelTheory}, Mitchell points
out that:
\begin{quote}
Unlike [an earlier proof], the sequence of ordinals $\kappa_{\nu}$ need not be strictly increasing;
however the sequence is nondecreasing and the fact that $\beta_{\nu+1} <\beta_{\nu}$ whenever
$\kappa_{\nu+1} = \kappa_{\nu}$ implies that for each $\nu$ there is an $n < \omega$ such that
$\kappa_{\nu + n} > \kappa_{\nu}$. This, together with the weak coherence of $\cU$ and $\cW$ is
enough to show that the comparison termates at some stage $\theta$.
\end{quote}

I find this statement confusing because we don't need any hypothesis to know that
there is an $n < \omega$ such that $\kappa_{\nu + n} > \kappa_{\nu}$. This follows from the fact that
the iterated ultrapower is well-founded. Also I don't know what Mitchell had in mind for how to
finish the proof without strictly increasing critical points.

It is also interesting to note that something similar to the incorrect definition of weakly coherent
from \cite{BeginningInnerModelTheory} is correst. In \cite{Mitchell-Revisited} Mitchell points out
that:

\begin{quote}
A simple example of a weakly coherent sequence $\cF$ ... is obtained by letting, for $\delta<o(\alpha)$,
$\cF(\alpha,\delta)$ be any measure $U$ on $\alpha$ such that $o(U) = \delta$.
\end{quote}

This is correct and sounds very similar to the incorrect definition of weakly coherent from
\cite{BeginningInnerModelTheory}. The difference is that here we are adding measures at \emph{every}
$\alpha$, not just $\alpha$ in an arbitrary domain.


\bibliographystyle{amsalpha}

\bibliography{math}

\end{document}
